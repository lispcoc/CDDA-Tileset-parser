# C:DDA Tile Parser

## はじめに
このソフトはC:DDAの複数のタイルセットを結合して
ひとつのタイルセットにするためのパーサーです。
MODで追加したアイテムに既存タイルを割り当てる機能もあります。

### こんなときに使う
ケース１：
タイルセットAを使いたいが、タイルセットAは一部のアイテム等のタイルが存在しない。
そこで、タイルがないアイテム等に対しては別のタイルセットBからタイルを持ってきて適用したい。
ケース２：
MODで新しくアイテム等を追加したので、タイルセットの既存タイルを割り当てたい。
もしくは既にタイル設定されているアイテムを別の既存タイルに差し替えたい。

### 使い方
1. cdda_tile_parser.bat(以下実行ファイル)と同じフォルダにある"tilesets"フォルダの中に
   結合したいタイルセット群を入れる。
2. 同じく"json_only"フォルダの中に追加したいタイル割り当て設定を書いたjsonファイルを入れる。
   Jsonファイルの書き方は後述。
3. 実行ファイルを起動
4. タイルセットオーダー/Json設定ファイルに使われるファイル一覧が表示されるので、
   必要に応じて適用順を並び替える
5. "タイルセットを出力"ボタンを押すと、同じディレクトリに"CustomTile"フォルダが生成され、
   中に新しいタイルセットが格納されます。

### タイル割り当てJsonの書き方
こんな感じで書きます。
-----
[
  {
    "id": "player_female",
    "copy-from": "mon_zombie"
  },
  {
    "id": "new_item",
    "copy-from": "10mm"
  }
]
-----
上のjsonはplayer_female(女性主人公)のタイルをmon_zombieと同じもの、つまりゾンビに差し替えます。
下のjsonは新しくMODで追加したnew_itemというアイテムに10mm(つまり10mm弾)と同じタイルを割り当てます。
※今のところこれだけですが、ソースコード整理できたら拡張機能も入れたい

### 注意
・元のタイルセットを破壊したりはしないと思いますが、念のため使用前にバックアップを必ず取ってください。
・Asciiタイルの結合には対応していません。（最後にロードされたセットのものが使われる）
・overlay_orderingの結合には対応していません。（最後にロードされたセットのものが使われる）
・WIP版につきバグが色々あるかと思います。発見した場合はご一報頂ければ時間の許す限り対応します。

### 仕様上致し方ないこと
・同一の画像ファイルを持つタイルセットを複数結合すると、その数だけタイルセットが肥大化します。
　これを避けたい場合、重複する画像はあらかじめ削除してタイル設定jsonファイルからも消しておく必要があります。
・内部がフォルダ分けされているタイルセットだとうまく動作しないかもしれません。

### 連絡先
GitHubリポジトリ https://github.com/lispcoc/CDDA-Tileset-parser
Issueに書いてください。

Twitterアカウント https://twitter.com/LISP_COC

＠の溜まり場II https://jbbs.shitaraba.net/game/9358/
(公共の掲示板なのでこちらを使用する場合は話題の邪魔にならないようお気をつけください)
